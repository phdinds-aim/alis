
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Moments &#8212; ALIS: Algorithmic Library for Scalability  documentation</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=4fea3ae4a0a4ba949df0a89bbae557cc2ce861ae" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom-style.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=f31d14ad54b65d19161ba51d4ffff3a77ae00456"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.1/dist/embed-amd.js"></script>
    <script>window.MathJax = {"TeX": {"equationNumbers": {"autoNumber": "AMS", "useLabelIds": true}}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Counting Ones in a Window" href="counting-ones.html" />
    <link rel="prev" title="Counting Distinct Elements in a Stream" href="counting-distinct.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">ALIS: Algorithmic Library for Scalability  documentation</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../introduction.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../installation.html">
   Installation
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Contents
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../finding-similar-items/index.html">
   Finding Similar Items
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../finding-similar-items/set-similarity.html">
     Set Similarity
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../finding-similar-items/shingling.html">
     Shingling of Documents
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../finding-similar-items/minhashing.html">
     Minhashing
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../finding-similar-items/introduction-to-lsh.html">
     Locality Sensitive Hashing
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../finding-similar-items/theory-of-lsf.html">
     Theory of LSF
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../finding-similar-items/lsh-for-minhash.html">
     LSH Banding Technique
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../finding-similar-items/the-lsh-class.html">
     Many-to-Many Document Similarity Task
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../finding-similar-items/demo-minhash-lsh.html">
     LSH and Document Similarity
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="index.html">
   Stream Mining
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="stream-data-model.html">
     Stream Data Model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="data-stream.html">
     Sampling Data in a Stream
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="filtering-stream.html">
     Filtering Streams
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="counting-distinct.html">
     Counting Distinct Elements in a Stream
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Moments
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="counting-ones.html">
     Counting Ones in a Window
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="common-recent.html">
     Most Common Recent Elements
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../link-analysis/index.html">
   Link Analysis
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../link-analysis/pagerank.html">
     PageRank
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../link-analysis/pagerank-for-large-data.html">
     PageRank for Large Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../link-analysis/pagerank-mapreduce.html">
     PageRank using MapReduce
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../link-analysis/topic-sensitive-pagerank.html">
     Topic-Sensitive PageRank
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../link-analysis/hubs-and-authorities.html">
     Hubs and Authorities
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../social-network-graphs/index.html">
   Social Network Graphs
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../social-network-graphs/social-network-preliminaries.html">
     What is a Social Network?
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../social-network-graphs/network-measures.html">
     Network Measures
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../social-network-graphs/community-detection.html">
     Community Detection
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../social-network-graphs/social-network-analysis-using-graphframes.html">
     Social Network Analysis using GraphFrames
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../bibliography.html">
   Bibliography
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  API Reference
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../api-docs/feature_extraction/index.html">
   Feature Extraction
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../api-docs/feature_extraction/shingles.html">
     Shingles
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
    <label for="toctree-checkbox-6">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../api-docs/feature_extraction/shingles/alis.feature_extraction.k_shingles.html">
       alis.feature_extraction.k_shingles
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../api-docs/feature_extraction/shingles/alis.feature_extraction.hashed_shingles.html">
       alis.feature_extraction.hashed_shingles
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../api-docs/feature_extraction/shingles/alis.feature_extraction.word_shingles.html">
       alis.feature_extraction.word_shingles
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../api-docs/feature_extraction/shingles/alis.feature_extraction.hashed_word_shingles.html">
       alis.feature_extraction.hashed_word_shingles
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../api-docs/feature_extraction/minhash.html">
     Minhashing
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
    <label for="toctree-checkbox-7">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../api-docs/feature_extraction/minhash_lsh/alis.feature_extraction.MinhashLSH.html">
       alis.feature_extraction.MinhashLSH
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
      <label for="toctree-checkbox-8">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../api-docs/feature_extraction/minhash_lsh/MinhashLSH/alis.feature_extraction.MinhashLSH.__init__.html">
         alis.feature_extraction.MinhashLSH.__init__
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api-docs/feature_extraction/minhash_lsh/MinhashLSH/alis.feature_extraction.MinhashLSH.transform.html">
         alis.feature_extraction.MinhashLSH.transform
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../api-docs/similarity/index.html">
   Similarity
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
  <label for="toctree-checkbox-9">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../api-docs/similarity/minhash_lsh.html">
     Minhash LSH
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
    <label for="toctree-checkbox-10">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../api-docs/similarity/lsh/alis.similarity.minhash_lsh.LSH.html">
       alis.similarity.minhash_lsh.LSH
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
      <label for="toctree-checkbox-11">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../api-docs/similarity/lsh/LSH/alis.similarity.minhash_lsh.LSH.__init__.html">
         alis.similarity.minhash_lsh.LSH.__init__
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api-docs/similarity/lsh/LSH/alis.similarity.minhash_lsh.LSH.get_buckets.html">
         alis.similarity.minhash_lsh.LSH.get_buckets
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api-docs/similarity/lsh/LSH/alis.similarity.minhash_lsh.LSH.make_bands.html">
         alis.similarity.minhash_lsh.LSH.make_bands
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api-docs/similarity/lsh/LSH/alis.similarity.minhash_lsh.LSH.plot_thresh.html">
         alis.similarity.minhash_lsh.LSH.plot_thresh
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../api-docs/similarity/jaccard.html">
     Jaccard Similarity
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
    <label for="toctree-checkbox-12">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../api-docs/similarity/jaccard/alis.similarity._jaccard.jaccard_sim.html">
       alis.similarity._jaccard.jaccard_sim
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../api-docs/stream_mining/index.html">
   Stream Mining
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/>
  <label for="toctree-checkbox-13">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../api-docs/stream_mining/link_analysis/alis.stream_mining.alonMatiasSzegedy.html">
     alis.stream_mining.alonMatiasSzegedy
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../api-docs/stream_mining/link_analysis/alis.stream_mining.flajoletMartin.html">
     alis.stream_mining.flajoletMartin
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../api-docs/link_analysis/index.html">
   Link Analysis
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/>
  <label for="toctree-checkbox-14">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../api-docs/link_analysis/link_analysis/alis.link_analysis.idealized_page_rank.html">
     alis.link_analysis.idealized_page_rank
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../api-docs/link_analysis/link_analysis/alis.link_analysis.transition_matrix.html">
     alis.link_analysis.transition_matrix
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../api-docs/link_analysis/link_analysis/alis.link_analysis.taxed_page_rank.html">
     alis.link_analysis.taxed_page_rank
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../api-docs/link_analysis/link_analysis/alis.link_analysis.topic_sensitive_page_rank.html">
     alis.link_analysis.topic_sensitive_page_rank
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../api-docs/link_analysis/link_analysis/alis.link_analysis.spam_mass.html">
     alis.link_analysis.spam_mass
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../api-docs/link_analysis/link_analysis/alis.link_analysis.hits.html">
     alis.link_analysis.hits
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../api-docs/network_tools/index.html">
   Network Tools
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/>
  <label for="toctree-checkbox-15">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../api-docs/network_tools/clustering.html">
     Clustering
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/>
    <label for="toctree-checkbox-16">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../api-docs/network_tools/clustering/alis.network_tools.clustering.LA.html">
       alis.network_tools.clustering.LA
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../api-docs/network_tools/clustering/alis.network_tools.clustering.IS2.html">
       alis.network_tools.clustering.IS2
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../api-docs/network_tools/metrics.html">
     Metrics
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/>
    <label for="toctree-checkbox-17">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../api-docs/network_tools/metrics/alis.network_tools.metrics.average_degree.html">
       alis.network_tools.metrics.average_degree
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../api-docs/network_tools/metrics/alis.network_tools.metrics.betweenness_centrality.html">
       alis.network_tools.metrics.betweenness_centrality
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../api-docs/network_tools/metrics/alis.network_tools.metrics.closeness_centrality.html">
       alis.network_tools.metrics.closeness_centrality
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../api-docs/network_tools/metrics/alis.network_tools.metrics.degree_centrality.html">
       alis.network_tools.metrics.degree_centrality
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../api-docs/network_tools/metrics/alis.network_tools.metrics.eigenvector_centrality.html">
       alis.network_tools.metrics.eigenvector_centrality
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../api-docs/network_tools/plots.html">
     Plots
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" type="checkbox"/>
    <label for="toctree-checkbox-18">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../api-docs/network_tools/metrics/alis.network_tools.plots.draw_communities.html">
       alis.network_tools.plots.draw_communities
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../api-docs/network_tools/metrics/alis.network_tools.plots.graph_to_edge_matrix.html">
       alis.network_tools.plots.graph_to_edge_matrix
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../api-docs/network_tools/metrics/alis.network_tools.plots.plot_degree_distribution.html">
       alis.network_tools.plots.plot_degree_distribution
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/stream-mining/moments.ipynb.txt"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#alon-matias-szegedy-algorithm-for-second-moments">
   Alon-Matias-Szegedy Algorithm for Second Moments
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#higher-order-elements">
   Higher Order Elements
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exercise">
     Exercise
    </a>
   </li>
  </ul>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Moments</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#alon-matias-szegedy-algorithm-for-second-moments">
   Alon-Matias-Szegedy Algorithm for Second Moments
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#higher-order-elements">
   Higher Order Elements
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exercise">
     Exercise
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section id="moments">
<h1>Moments<a class="headerlink" href="#moments" title="Permalink to this headline">#</a></h1>
<p>Computing the “moments” of a stream involves getting the distribution of the different elements in a stream, and is a generalization of the previous problem of counting distinct elements. Let <span class="math notranslate nohighlight">\(m_i\)</span> be the number of occurences of element <span class="math notranslate nohighlight">\(i\)</span> in a stream. The <em>kth-order moment</em> of a stream is the sum over all <span class="math notranslate nohighlight">\(i\)</span> of <span class="math notranslate nohighlight">\((m_i)^k\)</span>, or <span class="math notranslate nohighlight">\(\sum_i(m_i)^k\)</span>.</p>
<p>The 0th order moment of a stream is the sum of <span class="math notranslate nohighlight">\((m_i)^0\)</span>, or the sum of 1 for each element <span class="math notranslate nohighlight">\(i\)</span> found in the stream, or simply the count of distinct elements in the stream. We can use the Flajolet-Martin algorithm detailed above for this.</p>
<p>The 1st moment is the sum of <span class="math notranslate nohighlight">\(m_i\)</span>’s, or simply the length of the stream.</p>
<p>The 2nd moment is the sum <span class="math notranslate nohighlight">\((m_i)^2\)</span>. This measures how uneven the distribution of the elements of the stream is, and is also called the <em>surprise number</em>. Again, if the we have the capacity to store <span class="math notranslate nohighlight">\(m_i\)</span> for each element of the stream then this is easy to calculate. However if the number of elements if too large we need to look for alternatives such as approximation. One way to estimate the 2nd moment of the stream is to use the Alon-Matias-Szegedy (AMS) algorithm.</p>
<section id="alon-matias-szegedy-algorithm-for-second-moments">
<h2>Alon-Matias-Szegedy Algorithm for Second Moments<a class="headerlink" href="#alon-matias-szegedy-algorithm-for-second-moments" title="Permalink to this headline">#</a></h2>
<p>In the AMS algoritm we calculate a number of variables <span class="math notranslate nohighlight">\(X\)</span> as we go through the stream. The more <span class="math notranslate nohighlight">\(X\)</span>’s we calculate, the more accurate our estimate will be. Each element <span class="math notranslate nohighlight">\(X\)</span> contains:</p>
<ol class="simple">
<li><p><span class="math notranslate nohighlight">\(X.element\)</span> - an element of the universal set found in the stream.</p></li>
<li><p><span class="math notranslate nohighlight">\(X.value\)</span> - the number of times we have seen <span class="math notranslate nohighlight">\(X.element\)</span> in the stream since we have started tracking it.</p></li>
</ol>
<p>The estimate of the 2nd moment is <span class="math notranslate nohighlight">\(n \times (2 \times X.value − 1)\)</span>, where <span class="math notranslate nohighlight">\(n\)</span> is the length of the stream. We improve the final estimate by averaging the estimate of all <span class="math notranslate nohighlight">\(X\)</span>’s. One thing to note is we do not start tracking all the <span class="math notranslate nohighlight">\(X\)</span> variables at the start of the stream. Instead, we start tracking each <span class="math notranslate nohighlight">\(X\)</span> variable at random points as we go through the stream.</p>
<p>As an example, suppose we have a stream of length <span class="math notranslate nohighlight">\(n=15\)</span> and having values <em>a,b,c,b,d,a,c,d,a,b,d,c,a,a,b</em>. <span class="math notranslate nohighlight">\(m_a=5\)</span>, <span class="math notranslate nohighlight">\(m_b=4\)</span>, <span class="math notranslate nohighlight">\(m_c=3\)</span>, and <span class="math notranslate nohighlight">\(m_d=3\)</span>. The surprise number for this stream is therefore <span class="math notranslate nohighlight">\(52 + 42 + 32 + 32 = 59\)</span>. Let’s calculate 3 variables <span class="math notranslate nohighlight">\(X_1\)</span>, <span class="math notranslate nohighlight">\(X_2\)</span>, and <span class="math notranslate nohighlight">\(X_3\)</span>, starting at 3rd, 8th, and 13th positions respectively at “random”.</p>
<ul class="simple">
<li><p>At position 3 we find <em>c</em>, so we set <span class="math notranslate nohighlight">\(X_1.element\)</span> to <em>c</em> and <span class="math notranslate nohighlight">\(X_1.value\)</span> to 1. We’ll encounter two more <em>c</em> as we go through the stream so the final value of <span class="math notranslate nohighlight">\(X_1.value\)</span> is 3.</p></li>
<li><p>At position 8 we find <em>d</em>, so <span class="math notranslate nohighlight">\(X_2.element=d\)</span> and <span class="math notranslate nohighlight">\(X_2.value=1\)</span>. At the end of the stream $X_2.value=2, since we only count starting from position 8.</p></li>
<li><p>At position 13 is <em>a</em>, so <span class="math notranslate nohighlight">\(X_3.element=a\)</span>. The final value of <span class="math notranslate nohighlight">\(X_3.value\)</span> is 2.</p></li>
</ul>
<p>We calculate the estimate as <span class="math notranslate nohighlight">\(n \times (2 \times X.value − 1)\)</span>, so that’s <span class="math notranslate nohighlight">\(15×(2×3−1)=75\)</span> for <span class="math notranslate nohighlight">\(X_1\)</span> and <span class="math notranslate nohighlight">\(15×(2×2−1)=45\)</span> for both <span class="math notranslate nohighlight">\(X_2\)</span> and <span class="math notranslate nohighlight">\(X_3\)</span>. The average of the estimates is <span class="math notranslate nohighlight">\((75+45+45) \div 3 = 55\)</span>, which is close to the actual value of <span class="math notranslate nohighlight">\(59\)</span>.</p>
</section>
<section id="higher-order-elements">
<h2>Higher Order Elements<a class="headerlink" href="#higher-order-elements" title="Permalink to this headline">#</a></h2>
<p>We can estimate higher-order elements similar to how we estimate 2nd-order elements. The only difference is instead of <span class="math notranslate nohighlight">\(n \times (2 \times X.value − 1)\)</span> for the estimate, the formula is now <span class="math notranslate nohighlight">\(n \times (X.value^k−(X.value−1)^k)\)</span>.</p>
<p>Below we provide an alonMatiasSzegedy() function that takes as argument the moment value to approximate for, the number of variables to track, and the probability of an element in an array becoming a variable.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">alonMatiasSzegedy</span><span class="p">(</span><span class="n">iterator</span><span class="p">,</span> <span class="n">k_moment</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">num_variables</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">var_prob</span><span class="o">=</span><span class="mf">0.1</span><span class="p">):</span>
    <span class="n">variables</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
  
    <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">iterator</span><span class="p">:</span>
        <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
        
        <span class="k">if</span> <span class="n">val</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">variables</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">num_variables</span> <span class="ow">and</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">var_prob</span><span class="p">:</span>
                <span class="n">variables</span><span class="p">[</span><span class="n">val</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">variables</span><span class="p">[</span><span class="n">val</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>


    <span class="n">amsMoment</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">:</span>
        <span class="n">amsMoment</span> <span class="o">+=</span>   <span class="n">n</span> <span class="o">*</span> <span class="p">(</span><span class="n">variables</span><span class="p">[</span><span class="n">w</span><span class="p">]</span><span class="o">**</span><span class="n">k_moment</span> <span class="o">-</span> <span class="p">((</span><span class="n">variables</span><span class="p">[</span><span class="n">w</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span><span class="o">**</span><span class="n">k_moment</span><span class="p">))</span>

    <span class="n">amsMoment</span> <span class="o">/=</span> <span class="nb">len</span><span class="p">(</span><span class="n">variables</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">amsMoment</span>

<span class="n">testList</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">n</span><span class="o">=</span><span class="mi">0</span>
<span class="k">while</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">100000</span><span class="p">:</span>
    <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">testList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">words</span><span class="p">))</span>

<span class="n">test_iterator</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">testList</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">alonMatiasSzegedy</span><span class="p">(</span><span class="n">test_iterator</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>233333.33333333334
</pre></div>
</div>
</div>
</div>
<section id="exercise">
<h3>Exercise<a class="headerlink" href="#exercise" title="Permalink to this headline">#</a></h3>
<ol class="simple">
<li><p>Using the example above, with <span class="math notranslate nohighlight">\(X_1.value=3\)</span>, <span class="math notranslate nohighlight">\(X_2.value=2\)</span>, and <span class="math notranslate nohighlight">\(X_3.value=2\)</span>, what is the 5th moment?</p></li>
</ol>
</section>
</section>
</section>


              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="counting-distinct.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Counting Distinct Elements in a Stream</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="counting-ones.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Counting Ones in a Window</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By AIM PhD in DS 2024<br/>
  
      &copy; Copyright 2022, AIM PhD in DS 2024.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>